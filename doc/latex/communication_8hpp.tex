\hypertarget{communication_8hpp}{}\doxysection{src/communication.hpp File Reference}
\label{communication_8hpp}\index{src/communication.hpp@{src/communication.hpp}}


This file contains function for communication with server.  


{\ttfamily \#include $<$Pub\+Sub\+Client.\+h$>$}\newline
{\ttfamily \#include $<$Arduino\+Json.\+h$>$}\newline
{\ttfamily \#include $<$string$>$}\newline
{\ttfamily \#include \char`\"{}storage.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}statstruct.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}debug.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}config.\+hpp\char`\"{}}\newline
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{communication_8hpp_aeab2f678ad886fb7a6c48a77ce97d410}{callback}} (char $\ast$topic, byte $\ast$message, unsigned int length)
\begin{DoxyCompactList}\small\item\em Callback function for M\+Q\+TT client. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{communication_8hpp_a916231d4c35d14f9b61aa82dc219ba01}{upload\+Data}} (Dynamic\+Json\+Document \&doc, char $\ast$topic)
\begin{DoxyCompactList}\small\item\em Function for uploading measurment data to M\+Q\+TT topic on server. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{communication_8hpp_a22c0a72f297c0ca6075926a40b605242}{report\+Problem}} (\mbox{\hyperlink{structstatusStruct}{status\+Struct}} \&\mbox{\hyperlink{main_8cpp_a7ec54383c54558eb25447acb655e5665}{status}}, char $\ast$topic)
\begin{DoxyCompactList}\small\item\em Function for uploading error data to M\+Q\+TT topic on server. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{communication_8hpp_a2f8b7cef5b32403684936c1b5bd06c70}{log}} (const char $\ast$message, bool new\+Line=true, const char $\ast$topic=\mbox{\hyperlink{config_8hpp_a6b25a28190e19bc886bda4f65d04bbd4}{L\+O\+G\+\_\+\+T\+O\+P\+IC}})
\begin{DoxyCompactList}\small\item\em Is used to print log output to serial communication. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{communication_8hpp_a390e5c9a7746a6099a657ebcca395505}\label{communication_8hpp_a390e5c9a7746a6099a657ebcca395505}} 
Pub\+Sub\+Client \mbox{\hyperlink{communication_8hpp_a390e5c9a7746a6099a657ebcca395505}{mq\+Client}}
\begin{DoxyCompactList}\small\item\em Extern M\+Q\+TT client. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
This file contains function for communication with server. 



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{communication_8hpp_aeab2f678ad886fb7a6c48a77ce97d410}\label{communication_8hpp_aeab2f678ad886fb7a6c48a77ce97d410}} 
\index{communication.hpp@{communication.hpp}!callback@{callback}}
\index{callback@{callback}!communication.hpp@{communication.hpp}}
\doxysubsubsection{\texorpdfstring{callback()}{callback()}}
{\footnotesize\ttfamily void callback (\begin{DoxyParamCaption}\item[{char $\ast$}]{topic,  }\item[{byte $\ast$}]{message,  }\item[{unsigned int}]{length }\end{DoxyParamCaption})}



Callback function for M\+Q\+TT client. 


\begin{DoxyParams}{Parameters}
{\em toopic} & M\+Q\+TT topic name \\
\hline
{\em message} & content of message \\
\hline
{\em length} & size of message \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{communication_8hpp_a2f8b7cef5b32403684936c1b5bd06c70}\label{communication_8hpp_a2f8b7cef5b32403684936c1b5bd06c70}} 
\index{communication.hpp@{communication.hpp}!log@{log}}
\index{log@{log}!communication.hpp@{communication.hpp}}
\doxysubsubsection{\texorpdfstring{log()}{log()}}
{\footnotesize\ttfamily void log (\begin{DoxyParamCaption}\item[{const char $\ast$}]{message,  }\item[{bool}]{new\+Line = {\ttfamily true},  }\item[{const char $\ast$}]{topic = {\ttfamily \mbox{\hyperlink{config_8hpp_a6b25a28190e19bc886bda4f65d04bbd4}{L\+O\+G\+\_\+\+T\+O\+P\+IC}}} }\end{DoxyParamCaption})}



Is used to print log output to serial communication. 

If connection to server is available log is also sent to M\+Q\+TT topic. 
\begin{DoxyParams}{Parameters}
{\em message} & Content of log \\
\hline
{\em new\+Line} & Whetever or not print log to new line in serial communication D\+E\+F\+A\+U\+LT V\+A\+L\+UE = true. \\
\hline
{\em topic} & M\+Q\+TT topic name D\+E\+F\+A\+U\+LT V\+A\+L\+UE = L\+O\+G\+\_\+\+T\+O\+P\+IC. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{communication_8hpp_a22c0a72f297c0ca6075926a40b605242}\label{communication_8hpp_a22c0a72f297c0ca6075926a40b605242}} 
\index{communication.hpp@{communication.hpp}!reportProblem@{reportProblem}}
\index{reportProblem@{reportProblem}!communication.hpp@{communication.hpp}}
\doxysubsubsection{\texorpdfstring{reportProblem()}{reportProblem()}}
{\footnotesize\ttfamily bool report\+Problem (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structstatusStruct}{status\+Struct}} \&}]{status,  }\item[{char $\ast$}]{topic }\end{DoxyParamCaption})}



Function for uploading error data to M\+Q\+TT topic on server. 


\begin{DoxyParams}{Parameters}
{\em status} & Struct with status of each senzor and module. \\
\hline
{\em char} & M\+Q\+TT topic name. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Wherever or not upload was successful. 
\end{DoxyReturn}
\mbox{\Hypertarget{communication_8hpp_a916231d4c35d14f9b61aa82dc219ba01}\label{communication_8hpp_a916231d4c35d14f9b61aa82dc219ba01}} 
\index{communication.hpp@{communication.hpp}!uploadData@{uploadData}}
\index{uploadData@{uploadData}!communication.hpp@{communication.hpp}}
\doxysubsubsection{\texorpdfstring{uploadData()}{uploadData()}}
{\footnotesize\ttfamily bool upload\+Data (\begin{DoxyParamCaption}\item[{Dynamic\+Json\+Document \&}]{doc,  }\item[{char $\ast$}]{topic }\end{DoxyParamCaption})}



Function for uploading measurment data to M\+Q\+TT topic on server. 


\begin{DoxyParams}{Parameters}
{\em doc} & J\+S\+ON document with data. \\
\hline
{\em topic} & M\+Q\+TT topic name. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Wherever or not upload was successful. 
\end{DoxyReturn}
